<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Test PJI</title>
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <link rel="stylesheet" href="">
        <style>
        </style>
        <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    </head>
    <body>
        <script>
            var origins = [];
            const counts = {};
            function pushDataIfNotEmpty(d){
                if(d != ""){
                    origins.push(d);
                }
            }
            d3.select("body")
            .append("svg");
        
            d3.csv('./chi-data.csv', function(data){
                data.forEach(function(d) { 
                    pushDataIfNotEmpty(d.y2016);
                    pushDataIfNotEmpty(d.y2017);
                    pushDataIfNotEmpty(d.y2018);
                    pushDataIfNotEmpty(d.y2019);
                    //origins.push(d.y2016,d.y2017,d.y2018,d.y2019);
                 });
                 origins.forEach(country => {
                    counts[country] = counts[country] ? counts[country] + 1 : 1;
                 });
                console.log(counts);
            }); 
        </script>



    </body>
</html> 